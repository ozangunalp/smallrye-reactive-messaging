
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://smallrye.io/smallrye-reactive-messaging/3.14.0-SNAPSHOT/amqp/receiving-amqp-messages/">
      
      <link rel="icon" href="../../images/favicon.png">
      <meta name="generator" content="mkdocs-1.2.3, mkdocs-material-8.1.4">
    
    
      
        <title>Receiving messages - SmallRye Reactive Messaging</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.bb3983ee.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.e6a45f82.min.css">
        
          
          
          <meta name="theme-color" content="#546d78">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Red+Hat+Text:300,400,400i,700%7CUbuntu+Mono&display=fallback">
        <style>:root{--md-text-font:"Red Hat Text";--md-code-font:"Ubuntu Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../css/smallrye.css">
    
    <script>__md_scope=new URL("../..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="blue-grey" data-md-color-accent="blue">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#receiving-messages-from-amqp" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-component="outdated" hidden>
        <aside class="md-banner md-banner--warning">
          
        </aside>
      </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="SmallRye Reactive Messaging" class="md-header__button md-logo" aria-label="SmallRye Reactive Messaging" data-md-component="logo">
      
  <img src="../../images/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            SmallRye Reactive Messaging
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Receiving messages
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/smallrye/smallrye-reactive-messaging/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="SmallRye Reactive Messaging" class="md-nav__button md-logo" aria-label="SmallRye Reactive Messaging" data-md-component="logo">
      
  <img src="../../images/logo.png" alt="logo">

    </a>
    SmallRye Reactive Messaging
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/smallrye/smallrye-reactive-messaging/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      
      
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_2">
          Core
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Core" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Core
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/" class="md-nav__link">
        Getting Started
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_2" type="checkbox" id="__nav_2_2" >
      
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_2_2">
          Concepts
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Concepts" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_2">
          <span class="md-nav__icon md-icon"></span>
          Concepts
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/concepts/" class="md-nav__link">
        Introduction
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/model/" class="md-nav__link">
        Development Model
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/emitter/" class="md-nav__link">
        Emitters and Channel
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/connectors/" class="md-nav__link">
        Connectors
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/acknowledgement/" class="md-nav__link">
        Acknowledgement
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/blocking/" class="md-nav__link">
        Blocking Processing
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/signatures/" class="md-nav__link">
        Method Signatures
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/skipping/" class="md-nav__link">
        Skipping Messages
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/converters/" class="md-nav__link">
        Message Converters
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/broadcast/" class="md-nav__link">
        Broadcast
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/merge/" class="md-nav__link">
        Merge channels
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/incomings/" class="md-nav__link">
        @Incomings
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/testing/" class="md-nav__link">
        Testing
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/logging/" class="md-nav__link">
        Logging
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/advanced-config/" class="md-nav__link">
        Advanced Configuration
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_3">
          Kafka
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Kafka" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Kafka
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kafka/kafka/" class="md-nav__link">
        Apache Kafka Connector
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kafka/receiving-kafka-records/" class="md-nav__link">
        Receiving records
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kafka/writing-kafka-records/" class="md-nav__link">
        Writing records
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kafka/health/" class="md-nav__link">
        Health Checks
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kafka/avro-configuration/" class="md-nav__link">
        Using Avro
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kafka/protobuf-configuration/" class="md-nav__link">
        Using Protobuf
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kafka/consumer-rebalance-listener/" class="md-nav__link">
        Rebalance Listeners
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kafka/kerberos/" class="md-nav__link">
        Kerberos authentication
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kafka/client-service/" class="md-nav__link">
        Accessing the client
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kafka/default-configuration/" class="md-nav__link">
        Customizing Default Kafka Configuration
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" checked>
      
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_4">
          AMQP 1.0
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="AMQP 1.0" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          AMQP 1.0
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../amqp/" class="md-nav__link">
        AMQP 1.0 Connector
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Receiving messages
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Receiving messages
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#example" class="md-nav__link">
    Example
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deserialization" class="md-nav__link">
    Deserialization
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#inbound-metadata" class="md-nav__link">
    Inbound Metadata
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#acknowledgement" class="md-nav__link">
    Acknowledgement
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#failure-management" class="md-nav__link">
    Failure Management
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuration-reference" class="md-nav__link">
    Configuration Reference
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#receiving-cloud-events" class="md-nav__link">
    Receiving Cloud Events
  </a>
  
    <nav class="md-nav" aria-label="Receiving Cloud Events">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#binary-cloud-events" class="md-nav__link">
    Binary Cloud Events
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#structured-cloud-events" class="md-nav__link">
    Structured Cloud Events
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../sending-amqp-messages/" class="md-nav__link">
        Sending messages
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../health/" class="md-nav__link">
        Health Checks
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../client-customization/" class="md-nav__link">
        Client Customization
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../rabbitmq/" class="md-nav__link">
        Using RabbitMQ
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_5">
          RabbitMQ
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="RabbitMQ" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          RabbitMQ
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../rabbitmq/rabbitmq/" class="md-nav__link">
        RabbitMQ Connector
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../rabbitmq/receiving-messages-from-rabbitmq/" class="md-nav__link">
        Receiving messages
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../rabbitmq/sending-messages-to-rabbitmq/" class="md-nav__link">
        Sending messages
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../rabbitmq/rabbitmq-health/" class="md-nav__link">
        Health Checks
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../rabbitmq/rabbitmq-client-customization/" class="md-nav__link">
        Client Customization
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../rabbitmq/rabbitmq-cloud/" class="md-nav__link">
        Connecting to managed instances
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" >
      
      
      
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_6">
          Apache Camel
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Apache Camel" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Apache Camel
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../camel/camel/" class="md-nav__link">
        Apache Camel Connector
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../camel/receiving-messages-from-camel/" class="md-nav__link">
        Receiving messages from Camel
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../camel/sending-messages-to-camel/" class="md-nav__link">
        Sending messages to Camel
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../camel/camel-processor/" class="md-nav__link">
        Implementing Camel processor
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../camel/using-existing-routes/" class="md-nav__link">
        Using existing Camel routes
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7" type="checkbox" id="__nav_7" >
      
      
      
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_7">
          JMS
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="JMS" data-md-level="1">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          JMS
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../jms/jms/" class="md-nav__link">
        The JMS connector
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../jms/receiving-jms-messages/" class="md-nav__link">
        Receiving JMS messages
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../jms/sending-jms-messages/" class="md-nav__link">
        Sending JMS messages
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../jms/advanced-jms/" class="md-nav__link">
        Advanced configuration
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_8" type="checkbox" id="__nav_8" >
      
      
      
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_8">
          MQTT
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="MQTT" data-md-level="1">
        <label class="md-nav__title" for="__nav_8">
          <span class="md-nav__icon md-icon"></span>
          MQTT
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../mqtt/mqtt/" class="md-nav__link">
        MQTT Connector
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../mqtt/receiving-mqtt-messages/" class="md-nav__link">
        Receiving MQTT messages
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../mqtt/sending-messages-to-mqtt/" class="md-nav__link">
        Sending MQTT messages
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#example" class="md-nav__link">
    Example
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deserialization" class="md-nav__link">
    Deserialization
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#inbound-metadata" class="md-nav__link">
    Inbound Metadata
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#acknowledgement" class="md-nav__link">
    Acknowledgement
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#failure-management" class="md-nav__link">
    Failure Management
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuration-reference" class="md-nav__link">
    Configuration Reference
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#receiving-cloud-events" class="md-nav__link">
    Receiving Cloud Events
  </a>
  
    <nav class="md-nav" aria-label="Receiving Cloud Events">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#binary-cloud-events" class="md-nav__link">
    Binary Cloud Events
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#structured-cloud-events" class="md-nav__link">
    Structured Cloud Events
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
<a href="https://github.com/smallrye/smallrye-reactive-messaging/edit/main/documentation/src/main/docs/amqp/receiving-amqp-messages.md" title="Edit this page" class="md-content__button md-icon">
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
</a>


<h1 id="receiving-messages-from-amqp">Receiving messages from AMQP</h1>
<p>The AMQP connector lets you retrieve messages from an <a href="https://www.amqp.org/product/architecture">AMQP broker or
router</a>. The AMQP connector
retrieves <em>AMQP Messages</em> and maps each of them into Reactive Messaging
<code>Messages</code>.</p>
<h2 id="example">Example</h2>
<p>Let’s imagine you have an AMQP broker (such as <a href="https://activemq.apache.org/components/artemis/">Apache ActiveMQ
Artemis</a>) running, and
accessible using the <code>amqp:5672</code> address (by default it would use
<code>localhost:5672</code>). Configure your application to receive AMQP Messages
on the <code>prices</code> channel as follows:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-1">1</a></span>
<span class="normal"><a href="#__codelineno-0-2">2</a></span>
<span class="normal"><a href="#__codelineno-0-3">3</a></span>
<span class="normal"><a href="#__codelineno-0-4">4</a></span>
<span class="normal"><a href="#__codelineno-0-5">5</a></span>
<span class="normal"><a href="#__codelineno-0-6">6</a></span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1"></a><span class="na">amqp-host</span><span class="o">=</span><span class="s">amqp # &lt;1&gt;</span><span class="w"></span>
<a id="__codelineno-0-2" name="__codelineno-0-2"></a><span class="na">amqp-port</span><span class="o">=</span><span class="s">5672 # &lt;2&gt;</span><span class="w"></span>
<a id="__codelineno-0-3" name="__codelineno-0-3"></a><span class="na">amqp-username</span><span class="o">=</span><span class="s">my-username # &lt;3&gt;</span><span class="w"></span>
<a id="__codelineno-0-4" name="__codelineno-0-4"></a><span class="na">amqp-password</span><span class="o">=</span><span class="s">my-password # &lt;4&gt;</span><span class="w"></span>
<a id="__codelineno-0-5" name="__codelineno-0-5"></a>
<a id="__codelineno-0-6" name="__codelineno-0-6"></a><span class="na">mp.messaging.incoming.prices.connector</span><span class="o">=</span><span class="s">smallrye-amqp # &lt;5&gt;</span><span class="w"></span>
</code></pre></div>
</td></tr></table>
<ol>
<li>
<p>Configures the broker/router host name. You can do it per channel
    (using the <code>host</code> attribute) or globally using <code>amqp-host</code></p>
</li>
<li>
<p>Configures the broker/router port. You can do it per channel (using
    the <code>port</code> attribute) or globally using <code>amqp-port</code>. The default is
    <code>5672</code>.</p>
</li>
<li>
<p>Configures the broker/router username if required. You can do it per
    channel (using the <code>username</code> attribute) or globally using
    <code>amqp-username</code>.</p>
</li>
<li>
<p>Configures the broker/router password if required. You can do it per
    channel (using the <code>password</code> attribute) or globally using
    <code>amqp-password</code>.</p>
</li>
<li>
<p>Instructs the <code>prices</code> channel to be managed by the AMQP connector</p>
</li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You don’t need to set the AMQP <em>address</em>. By default, it uses the
channel name (<code>prices</code>). You can configure the <code>address</code> attribute to
override it.</p>
</div>
<p>Then, your application receives <code>Message&lt;Double&gt;</code>. You can consume the
payload directly:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-1-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-1-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-1-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-1-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-1-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-1-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-1-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-1-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-1-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-1-10">10</a></span>
<span class="normal"><a href="#__codelineno-1-11">11</a></span>
<span class="normal"><a href="#__codelineno-1-12">12</a></span>
<span class="normal"><a href="#__codelineno-1-13">13</a></span>
<span class="normal"><a href="#__codelineno-1-14">14</a></span>
<span class="normal"><a href="#__codelineno-1-15">15</a></span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1"></a><span class="kn">package</span> <span class="nn">amqp.inbound</span><span class="p">;</span>
<a id="__codelineno-1-2" name="__codelineno-1-2"></a>
<a id="__codelineno-1-3" name="__codelineno-1-3"></a><span class="kn">import</span> <span class="nn">javax.enterprise.context.ApplicationScoped</span><span class="p">;</span>
<a id="__codelineno-1-4" name="__codelineno-1-4"></a>
<a id="__codelineno-1-5" name="__codelineno-1-5"></a><span class="kn">import</span> <span class="nn">org.eclipse.microprofile.reactive.messaging.Incoming</span><span class="p">;</span>
<a id="__codelineno-1-6" name="__codelineno-1-6"></a>
<a id="__codelineno-1-7" name="__codelineno-1-7"></a><span class="nd">@ApplicationScoped</span>
<a id="__codelineno-1-8" name="__codelineno-1-8"></a><span class="kd">public</span> <span class="kd">class</span> <span class="nc">AmqpPriceConsumer</span> <span class="p">{</span>
<a id="__codelineno-1-9" name="__codelineno-1-9"></a>
<a id="__codelineno-1-10" name="__codelineno-1-10"></a>    <span class="nd">@Incoming</span><span class="p">(</span><span class="s">&quot;prices&quot;</span><span class="p">)</span>
<a id="__codelineno-1-11" name="__codelineno-1-11"></a>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">consume</span><span class="p">(</span><span class="kt">double</span> <span class="n">price</span><span class="p">)</span> <span class="p">{</span>
<a id="__codelineno-1-12" name="__codelineno-1-12"></a>        <span class="c1">// process your price.</span>
<a id="__codelineno-1-13" name="__codelineno-1-13"></a>    <span class="p">}</span>
<a id="__codelineno-1-14" name="__codelineno-1-14"></a>
<a id="__codelineno-1-15" name="__codelineno-1-15"></a><span class="p">}</span>
</code></pre></div>
</td></tr></table>
<p>Or, you can retrieve the <code>Message&lt;Double&gt;</code>:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-2-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-2-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-2-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-2-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-2-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-2-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-2-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-2-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-2-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-2-10">10</a></span>
<span class="normal"><a href="#__codelineno-2-11">11</a></span>
<span class="normal"><a href="#__codelineno-2-12">12</a></span>
<span class="normal"><a href="#__codelineno-2-13">13</a></span>
<span class="normal"><a href="#__codelineno-2-14">14</a></span>
<span class="normal"><a href="#__codelineno-2-15">15</a></span>
<span class="normal"><a href="#__codelineno-2-16">16</a></span>
<span class="normal"><a href="#__codelineno-2-17">17</a></span>
<span class="normal"><a href="#__codelineno-2-18">18</a></span>
<span class="normal"><a href="#__codelineno-2-19">19</a></span>
<span class="normal"><a href="#__codelineno-2-20">20</a></span>
<span class="normal"><a href="#__codelineno-2-21">21</a></span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1"></a><span class="kn">package</span> <span class="nn">amqp.inbound</span><span class="p">;</span>
<a id="__codelineno-2-2" name="__codelineno-2-2"></a>
<a id="__codelineno-2-3" name="__codelineno-2-3"></a><span class="kn">import</span> <span class="nn">java.util.concurrent.CompletionStage</span><span class="p">;</span>
<a id="__codelineno-2-4" name="__codelineno-2-4"></a>
<a id="__codelineno-2-5" name="__codelineno-2-5"></a><span class="kn">import</span> <span class="nn">javax.enterprise.context.ApplicationScoped</span><span class="p">;</span>
<a id="__codelineno-2-6" name="__codelineno-2-6"></a>
<a id="__codelineno-2-7" name="__codelineno-2-7"></a><span class="kn">import</span> <span class="nn">org.eclipse.microprofile.reactive.messaging.Incoming</span><span class="p">;</span>
<a id="__codelineno-2-8" name="__codelineno-2-8"></a><span class="kn">import</span> <span class="nn">org.eclipse.microprofile.reactive.messaging.Message</span><span class="p">;</span>
<a id="__codelineno-2-9" name="__codelineno-2-9"></a>
<a id="__codelineno-2-10" name="__codelineno-2-10"></a><span class="nd">@ApplicationScoped</span>
<a id="__codelineno-2-11" name="__codelineno-2-11"></a><span class="kd">public</span> <span class="kd">class</span> <span class="nc">AmqpPriceMessageConsumer</span> <span class="p">{</span>
<a id="__codelineno-2-12" name="__codelineno-2-12"></a>
<a id="__codelineno-2-13" name="__codelineno-2-13"></a>    <span class="nd">@Incoming</span><span class="p">(</span><span class="s">&quot;prices&quot;</span><span class="p">)</span>
<a id="__codelineno-2-14" name="__codelineno-2-14"></a>    <span class="kd">public</span> <span class="n">CompletionStage</span><span class="o">&lt;</span><span class="n">Void</span><span class="o">&gt;</span> <span class="nf">consume</span><span class="p">(</span><span class="n">Message</span><span class="o">&lt;</span><span class="n">Double</span><span class="o">&gt;</span> <span class="n">price</span><span class="p">)</span> <span class="p">{</span>
<a id="__codelineno-2-15" name="__codelineno-2-15"></a>        <span class="c1">// process your price.</span>
<a id="__codelineno-2-16" name="__codelineno-2-16"></a>
<a id="__codelineno-2-17" name="__codelineno-2-17"></a>        <span class="c1">// Acknowledge the incoming message, marking the AMQP message as `accepted`.</span>
<a id="__codelineno-2-18" name="__codelineno-2-18"></a>        <span class="k">return</span> <span class="n">price</span><span class="p">.</span><span class="na">ack</span><span class="p">();</span>
<a id="__codelineno-2-19" name="__codelineno-2-19"></a>    <span class="p">}</span>
<a id="__codelineno-2-20" name="__codelineno-2-20"></a>
<a id="__codelineno-2-21" name="__codelineno-2-21"></a><span class="p">}</span>
</code></pre></div>
</td></tr></table>
<h2 id="deserialization">Deserialization</h2>
<p>The connector converts incoming AMQP Messages into Reactive Messaging
<code>Message&lt;T&gt;</code> instances. <code>T</code> depends on the <em>body</em> of the received AMQP
Message.</p>
<p>The <a href="http://docs.oasis-open.org/amqp/core/v1.0/os/amqp-core-types-v1.0-os.html">AMQP Type
System</a>
defines the supported types.</p>
<table>
<thead>
<tr>
<th>AMQP Body Type</th>
<th><code>&lt;T&gt;</code></th>
</tr>
</thead>
<tbody>
<tr>
<td>AMQP Value containing a <a href="http://docs.oasis-open.org/amqp/core/v1.0/os/amqp-core-types-v1.0-os.html#section-primitive-type-definitions">AMQP Primitive Type</a></td>
<td>the corresponding Java type</td>
</tr>
<tr>
<td>AMQP Value using the <code>Binary</code> type</td>
<td><code>byte[]</code></td>
</tr>
<tr>
<td>AMQP Sequence</td>
<td><code>List</code></td>
</tr>
<tr>
<td>AMQP Data (with binary content) and the <code>content-type</code> is set to <code>application/json</code></td>
<td><a href="https://vertx.io/docs/apidocs/io/vertx/core/json/JsonObject.html"><code>JsonObject</code></a></td>
</tr>
<tr>
<td>AMQP Data with a different <code>content-type</code></td>
<td><code>byte[]</code></td>
</tr>
</tbody>
</table>
<p>If you send objects with this AMQP connector (outbound connector), it
gets encoded as JSON and sent as binary. The <code>content-type</code> is set to
<code>application/json</code>. You can receive this payload using (Vert.x) JSON
Objects, and then map it to the object class you want:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-3-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-3-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-3-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-3-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-3-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-3-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-3-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-3-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-3-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-3-10">10</a></span>
<span class="normal"><a href="#__codelineno-3-11">11</a></span>
<span class="normal"><a href="#__codelineno-3-12">12</a></span>
<span class="normal"><a href="#__codelineno-3-13">13</a></span>
<span class="normal"><a href="#__codelineno-3-14">14</a></span>
<span class="normal"><a href="#__codelineno-3-15">15</a></span>
<span class="normal"><a href="#__codelineno-3-16">16</a></span>
<span class="normal"><a href="#__codelineno-3-17">17</a></span>
<span class="normal"><a href="#__codelineno-3-18">18</a></span>
<span class="normal"><a href="#__codelineno-3-19">19</a></span>
<span class="normal"><a href="#__codelineno-3-20">20</a></span>
<span class="normal"><a href="#__codelineno-3-21">21</a></span>
<span class="normal"><a href="#__codelineno-3-22">22</a></span>
<span class="normal"><a href="#__codelineno-3-23">23</a></span>
<span class="normal"><a href="#__codelineno-3-24">24</a></span>
<span class="normal"><a href="#__codelineno-3-25">25</a></span>
<span class="normal"><a href="#__codelineno-3-26">26</a></span>
<span class="normal"><a href="#__codelineno-3-27">27</a></span>
<span class="normal"><a href="#__codelineno-3-28">28</a></span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1"></a><span class="nd">@ApplicationScoped</span>
<a id="__codelineno-3-2" name="__codelineno-3-2"></a><span class="kd">public</span> <span class="kd">static</span> <span class="kd">class</span> <span class="nc">Generator</span> <span class="p">{</span>
<a id="__codelineno-3-3" name="__codelineno-3-3"></a>
<a id="__codelineno-3-4" name="__codelineno-3-4"></a>    <span class="nd">@Outgoing</span><span class="p">(</span><span class="s">&quot;to-amqp&quot;</span><span class="p">)</span>
<a id="__codelineno-3-5" name="__codelineno-3-5"></a>    <span class="kd">public</span> <span class="n">Multi</span><span class="o">&lt;</span><span class="n">Price</span><span class="o">&gt;</span> <span class="nf">prices</span><span class="p">()</span> <span class="p">{</span>                      <span class="c1">// &lt;1&gt;</span>
<a id="__codelineno-3-6" name="__codelineno-3-6"></a>        <span class="n">AtomicInteger</span> <span class="n">count</span> <span class="o">=</span> <span class="k">new</span> <span class="n">AtomicInteger</span><span class="p">();</span>
<a id="__codelineno-3-7" name="__codelineno-3-7"></a>        <span class="k">return</span> <span class="n">Multi</span><span class="p">.</span><span class="na">createFrom</span><span class="p">().</span><span class="na">ticks</span><span class="p">().</span><span class="na">every</span><span class="p">(</span><span class="n">Duration</span><span class="p">.</span><span class="na">ofMillis</span><span class="p">(</span><span class="mi">1000</span><span class="p">))</span>
<a id="__codelineno-3-8" name="__codelineno-3-8"></a>                <span class="p">.</span><span class="na">map</span><span class="p">(</span><span class="n">l</span> <span class="o">-&gt;</span> <span class="k">new</span> <span class="n">Price</span><span class="p">().</span><span class="na">setPrice</span><span class="p">(</span><span class="n">count</span><span class="p">.</span><span class="na">incrementAndGet</span><span class="p">()))</span>
<a id="__codelineno-3-9" name="__codelineno-3-9"></a>                <span class="p">.</span><span class="na">onOverflow</span><span class="p">().</span><span class="na">drop</span><span class="p">();</span>
<a id="__codelineno-3-10" name="__codelineno-3-10"></a>    <span class="p">}</span>
<a id="__codelineno-3-11" name="__codelineno-3-11"></a>
<a id="__codelineno-3-12" name="__codelineno-3-12"></a><span class="p">}</span>
<a id="__codelineno-3-13" name="__codelineno-3-13"></a>
<a id="__codelineno-3-14" name="__codelineno-3-14"></a><span class="nd">@ApplicationScoped</span>
<a id="__codelineno-3-15" name="__codelineno-3-15"></a><span class="kd">public</span> <span class="kd">static</span> <span class="kd">class</span> <span class="nc">Consumer</span> <span class="p">{</span>
<a id="__codelineno-3-16" name="__codelineno-3-16"></a>
<a id="__codelineno-3-17" name="__codelineno-3-17"></a>    <span class="n">List</span><span class="o">&lt;</span><span class="n">Price</span><span class="o">&gt;</span> <span class="n">prices</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CopyOnWriteArrayList</span><span class="o">&lt;&gt;</span><span class="p">();</span>
<a id="__codelineno-3-18" name="__codelineno-3-18"></a>
<a id="__codelineno-3-19" name="__codelineno-3-19"></a>    <span class="nd">@Incoming</span><span class="p">(</span><span class="s">&quot;from-amqp&quot;</span><span class="p">)</span>
<a id="__codelineno-3-20" name="__codelineno-3-20"></a>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">consume</span><span class="p">(</span><span class="n">JsonObject</span> <span class="n">p</span><span class="p">)</span> <span class="p">{</span>             <span class="c1">// &lt;2&gt;</span>
<a id="__codelineno-3-21" name="__codelineno-3-21"></a>        <span class="n">Price</span> <span class="n">price</span> <span class="o">=</span> <span class="n">p</span><span class="p">.</span><span class="na">mapTo</span><span class="p">(</span><span class="n">Price</span><span class="p">.</span><span class="na">class</span><span class="p">);</span>         <span class="c1">// &lt;3&gt;</span>
<a id="__codelineno-3-22" name="__codelineno-3-22"></a>        <span class="n">prices</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">price</span><span class="p">);</span>
<a id="__codelineno-3-23" name="__codelineno-3-23"></a>    <span class="p">}</span>
<a id="__codelineno-3-24" name="__codelineno-3-24"></a>
<a id="__codelineno-3-25" name="__codelineno-3-25"></a>    <span class="kd">public</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">Price</span><span class="o">&gt;</span> <span class="nf">list</span><span class="p">()</span> <span class="p">{</span>
<a id="__codelineno-3-26" name="__codelineno-3-26"></a>        <span class="k">return</span> <span class="n">prices</span><span class="p">;</span>
<a id="__codelineno-3-27" name="__codelineno-3-27"></a>    <span class="p">}</span>
<a id="__codelineno-3-28" name="__codelineno-3-28"></a><span class="p">}</span>
</code></pre></div>
</td></tr></table>
<ol>
<li>
<p>The <code>Price</code> instances are automatically encoded to JSON by the
    connector</p>
</li>
<li>
<p>You can receive it using a <code>JsonObject</code></p>
</li>
<li>
<p>Then, you can reconstruct the instance using the <code>mapTo</code> method</p>
</li>
</ol>
<h2 id="inbound-metadata">Inbound Metadata</h2>
<p>Messages coming from AMQP contains an instance of <a class='docissimo, docissimo-javadoc' href='https://javadoc.io/doc/io.smallrye.reactive/smallrye-reactive-messaging-amqp/3.14.0-SNAPSHOT/io/smallrye/reactive/messaging/amqp/IncomingAmqpMetadata.html'>IncomingAmqpMetadata</a></p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-4-1">1</a></span>
<span class="normal"><a href="#__codelineno-4-2">2</a></span>
<span class="normal"><a href="#__codelineno-4-3">3</a></span>
<span class="normal"><a href="#__codelineno-4-4">4</a></span>
<span class="normal"><a href="#__codelineno-4-5">5</a></span>
<span class="normal"><a href="#__codelineno-4-6">6</a></span>
<span class="normal"><a href="#__codelineno-4-7">7</a></span>
<span class="normal"><a href="#__codelineno-4-8">8</a></span>
<span class="normal"><a href="#__codelineno-4-9">9</a></span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1"></a><span class="n">Optional</span><span class="o">&lt;</span><span class="n">IncomingAmqpMetadata</span><span class="o">&gt;</span> <span class="n">metadata</span> <span class="o">=</span> <span class="n">incoming</span><span class="p">.</span><span class="na">getMetadata</span><span class="p">(</span><span class="n">IncomingAmqpMetadata</span><span class="p">.</span><span class="na">class</span><span class="p">);</span>
<a id="__codelineno-4-2" name="__codelineno-4-2"></a><span class="n">metadata</span><span class="p">.</span><span class="na">ifPresent</span><span class="p">(</span><span class="n">meta</span> <span class="o">-&gt;</span> <span class="p">{</span>
<a id="__codelineno-4-3" name="__codelineno-4-3"></a>    <span class="n">String</span> <span class="n">address</span> <span class="o">=</span> <span class="n">meta</span><span class="p">.</span><span class="na">getAddress</span><span class="p">();</span>
<a id="__codelineno-4-4" name="__codelineno-4-4"></a>    <span class="n">String</span> <span class="n">subject</span> <span class="o">=</span> <span class="n">meta</span><span class="p">.</span><span class="na">getSubject</span><span class="p">();</span>
<a id="__codelineno-4-5" name="__codelineno-4-5"></a>    <span class="kt">boolean</span> <span class="n">durable</span> <span class="o">=</span> <span class="n">meta</span><span class="p">.</span><span class="na">isDurable</span><span class="p">();</span>
<a id="__codelineno-4-6" name="__codelineno-4-6"></a>    <span class="c1">// Use io.vertx.core.json.JsonObject</span>
<a id="__codelineno-4-7" name="__codelineno-4-7"></a>    <span class="n">JsonObject</span> <span class="n">properties</span> <span class="o">=</span> <span class="n">meta</span><span class="p">.</span><span class="na">getProperties</span><span class="p">();</span>
<a id="__codelineno-4-8" name="__codelineno-4-8"></a>    <span class="c1">// ...</span>
<a id="__codelineno-4-9" name="__codelineno-4-9"></a><span class="p">});</span>
</code></pre></div>
</td></tr></table>
<h2 id="acknowledgement">Acknowledgement</h2>
<p>When a Reactive Messaging <code>Message</code> associated with an AMQP Message is
acknowledged, it informs the broker that the message has been
<em>accepted</em>.</p>
<h2 id="failure-management">Failure Management</h2>
<p>If a message produced from an AMQP message is <em>nacked</em>, a failure
strategy is applied. The AMQP connector supports six strategies:</p>
<ul>
<li>
<p><code>fail</code> - fail the application; no more AMQP messages will be
    processed (default). The AMQP message is marked as rejected.</p>
</li>
<li>
<p><code>accept</code> - this strategy marks the AMQP message as <em>accepted</em>. The
    processing continues ignoring the failure. Refer to the <a href="http://docs.oasis-open.org/amqp/core/v1.0/os/amqp-core-messaging-v1.0-os.html#type-accepted">accepted
    delivery state
    documentation</a>.</p>
</li>
<li>
<p><code>release</code> - this strategy marks the AMQP message as <em>released</em>. The
    processing continues with the next message. The broker can redeliver
    the message. Refer to the <a href="http://docs.oasis-open.org/amqp/core/v1.0/os/amqp-core-messaging-v1.0-os.html#type-released">released delivery state
    documentation</a>.</p>
</li>
<li>
<p><code>reject</code> - this strategy marks the AMQP message as rejected. The
    processing continues with the next message. Refer to the <a href="http://docs.oasis-open.org/amqp/core/v1.0/os/amqp-core-messaging-v1.0-os.html#type-rejected">rejected
    delivery state
    documentation</a>.</p>
</li>
<li>
<p><code>modified-failed</code> - this strategy marks the AMQP message as
    <em>modified</em> and indicates that it failed (with the <code>delivery-failed</code>
    attribute). The processing continues with the next message, but the
    broker may attempt to redeliver the message. Refer to the <a href="http://docs.oasis-open.org/amqp/core/v1.0/os/amqp-core-messaging-v1.0-os.html#type-modified">modified
    delivery state
    documentation</a></p>
</li>
<li>
<p><code>modified-failed-undeliverable-here</code> - this strategy marks the AMQP
    message as <em>modified</em> and indicates that it failed (with the
    <code>delivery-failed</code> attribute). It also indicates that the application
    cannot process the message, meaning that the broker will not attempt
    to redeliver the message to this node. The processing continues with
    the next message. Refer to the <a href="http://docs.oasis-open.org/amqp/core/v1.0/os/amqp-core-messaging-v1.0-os.html#type-modified">modified delivery state
    documentation</a></p>
</li>
</ul>
<h2 id="configuration-reference">Configuration Reference</h2>
<table>
<thead>
<tr>
<th align="left">Attribute (<em>alias</em>)</th>
<th align="left">Description</th>
<th align="center">Type</th>
<th align="center">Mandatory</th>
<th align="left">Default</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><em>address</em></td>
<td align="left">The AMQP address. If not set, the channel name is used</td>
<td align="center">string</td>
<td align="center">false</td>
<td align="left"></td>
</tr>
<tr>
<td align="left"><em>auto-acknowledgement</em></td>
<td align="left">Whether the received AMQP messages must be acknowledged when received</td>
<td align="center">boolean</td>
<td align="center">false</td>
<td align="left"><code>false</code></td>
</tr>
<tr>
<td align="left"><em>broadcast</em></td>
<td align="left">Whether the received AMQP messages must be dispatched to multiple <em>subscribers</em></td>
<td align="center">boolean</td>
<td align="center">false</td>
<td align="left"><code>false</code></td>
</tr>
<tr>
<td align="left"><em>capabilities</em></td>
<td align="left">A comma-separated list of capabilities proposed by the sender or receiver client.</td>
<td align="center">string</td>
<td align="center">false</td>
<td align="left"></td>
</tr>
<tr>
<td align="left"><em>client-options-name</em> <em>(amqp-client-options-name)</em></td>
<td align="left">The name of the AMQP Client Option bean used to customize the AMQP client configuration</td>
<td align="center">string</td>
<td align="center">false</td>
<td align="left"></td>
</tr>
<tr>
<td align="left"><em>cloud-events</em></td>
<td align="left">Enables (default) or disables the Cloud Event support. If enabled on an <em>incoming</em> channel, the connector analyzes the incoming records and try to create Cloud Event metadata. If enabled on an <em>outgoing</em>, the connector sends the outgoing messages as Cloud Event if the message includes Cloud Event Metadata.</td>
<td align="center">boolean</td>
<td align="center">false</td>
<td align="left"><code>true</code></td>
</tr>
<tr>
<td align="left"><em>connect-timeout</em> <em>(amqp-connect-timeout)</em></td>
<td align="left">The connection timeout in milliseconds</td>
<td align="center">int</td>
<td align="center">false</td>
<td align="left"><code>1000</code></td>
</tr>
<tr>
<td align="left"><em>container-id</em></td>
<td align="left">The AMQP container id</td>
<td align="center">string</td>
<td align="center">false</td>
<td align="left"></td>
</tr>
<tr>
<td align="left"><em>durable</em></td>
<td align="left">Whether AMQP subscription is durable</td>
<td align="center">boolean</td>
<td align="center">false</td>
<td align="left"><code>false</code></td>
</tr>
<tr>
<td align="left"><em>failure-strategy</em></td>
<td align="left">Specify the failure strategy to apply when a message produced from an AMQP message is nacked. Accepted values are <code>fail</code> (default), <code>accept</code>, <code>release</code>, <code>reject</code>, <code>modified-failed</code>, <code>modified-failed-undeliverable-here</code></td>
<td align="center">string</td>
<td align="center">false</td>
<td align="left"><code>fail</code></td>
</tr>
<tr>
<td align="left"><em>health-timeout</em></td>
<td align="left">The max number of seconds to wait to determine if the connection with the broker is still established for the readiness check. After that threshold, the check is considered as failed.</td>
<td align="center">int</td>
<td align="center">false</td>
<td align="left"><code>3</code></td>
</tr>
<tr>
<td align="left"><em>host</em> <em>(amqp-host)</em></td>
<td align="left">The broker hostname</td>
<td align="center">string</td>
<td align="center">false</td>
<td align="left"><code>localhost</code></td>
</tr>
<tr>
<td align="left"><em>link-name</em></td>
<td align="left">The name of the link. If not set, the channel name is used.</td>
<td align="center">string</td>
<td align="center">false</td>
<td align="left"></td>
</tr>
<tr>
<td align="left"><em>password</em> <em>(amqp-password)</em></td>
<td align="left">The password used to authenticate to the broker</td>
<td align="center">string</td>
<td align="center">false</td>
<td align="left"></td>
</tr>
<tr>
<td align="left"><em>port</em> <em>(amqp-port)</em></td>
<td align="left">The broker port</td>
<td align="center">int</td>
<td align="center">false</td>
<td align="left"><code>5672</code></td>
</tr>
<tr>
<td align="left"><em>reconnect-attempts</em> <em>(amqp-reconnect-attempts)</em></td>
<td align="left">The number of reconnection attempts</td>
<td align="center">int</td>
<td align="center">false</td>
<td align="left"><code>100</code></td>
</tr>
<tr>
<td align="left"><em>reconnect-interval</em> <em>(amqp-reconnect-interval)</em></td>
<td align="left">The interval in second between two reconnection attempts</td>
<td align="center">int</td>
<td align="center">false</td>
<td align="left"><code>10</code></td>
</tr>
<tr>
<td align="left"><em>sni-server-name</em> <em>(amqp-sni-server-name)</em></td>
<td align="left">If set, explicitly override the hostname to use for the TLS SNI server name</td>
<td align="center">string</td>
<td align="center">false</td>
<td align="left"></td>
</tr>
<tr>
<td align="left"><em>tracing-enabled</em></td>
<td align="left">Whether tracing is enabled (default) or disabled</td>
<td align="center">boolean</td>
<td align="center">false</td>
<td align="left"><code>true</code></td>
</tr>
<tr>
<td align="left"><em>use-ssl</em> <em>(amqp-use-ssl)</em></td>
<td align="left">Whether the AMQP connection uses SSL/TLS</td>
<td align="center">boolean</td>
<td align="center">false</td>
<td align="left"><code>false</code></td>
</tr>
<tr>
<td align="left"><em>username</em> <em>(amqp-username)</em></td>
<td align="left">The username used to authenticate to the broker</td>
<td align="center">string</td>
<td align="center">false</td>
<td align="left"></td>
</tr>
<tr>
<td align="left"><em>virtual-host</em> <em>(amqp-virtual-host)</em></td>
<td align="left">If set, configure the hostname value used for the connection AMQP Open frame and TLS SNI server name (if TLS is in use)</td>
<td align="center">string</td>
<td align="center">false</td>
<td align="left"></td>
</tr>
</tbody>
</table>
<p>You can also pass any property supported by the <a href="https://vertx.io/docs/vertx-amqp-client/java/">Vert.x AMQP
client</a> as attribute.</p>
<p>To use an existing <em>address</em> or <em>queue</em>, you need to configure the
<code>address</code>, <code>container-id</code> and, optionally, the <code>link-name</code> attributes.
For example, if you have an Apache Artemis broker configured with:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-5-1">1</a></span>
<span class="normal"><a href="#__codelineno-5-2">2</a></span>
<span class="normal"><a href="#__codelineno-5-3">3</a></span>
<span class="normal"><a href="#__codelineno-5-4">4</a></span>
<span class="normal"><a href="#__codelineno-5-5">5</a></span>
<span class="normal"><a href="#__codelineno-5-6">6</a></span>
<span class="normal"><a href="#__codelineno-5-7">7</a></span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1"></a><span class="nt">&lt;queues&gt;</span>
<a id="__codelineno-5-2" name="__codelineno-5-2"></a>    <span class="nt">&lt;queue</span> <span class="na">name=</span><span class="s">&quot;people&quot;</span><span class="nt">&gt;</span>
<a id="__codelineno-5-3" name="__codelineno-5-3"></a>        <span class="nt">&lt;address&gt;</span>people<span class="nt">&lt;/address&gt;</span>
<a id="__codelineno-5-4" name="__codelineno-5-4"></a>        <span class="nt">&lt;durable&gt;</span>true<span class="nt">&lt;/durable&gt;</span>
<a id="__codelineno-5-5" name="__codelineno-5-5"></a>        <span class="nt">&lt;user&gt;</span>artemis<span class="nt">&lt;/user&gt;</span>
<a id="__codelineno-5-6" name="__codelineno-5-6"></a>    <span class="nt">&lt;/queue&gt;</span>
<a id="__codelineno-5-7" name="__codelineno-5-7"></a><span class="nt">&lt;/queues&gt;</span>
</code></pre></div>
</td></tr></table>
<p>You need the following configuration:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-6-1">1</a></span>
<span class="normal"><a href="#__codelineno-6-2">2</a></span>
<span class="normal"><a href="#__codelineno-6-3">3</a></span>
<span class="normal"><a href="#__codelineno-6-4">4</a></span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1"></a><span class="na">mp.messaging.incoming.people.connector</span><span class="o">=</span><span class="s">smallrye-amqp</span><span class="w"></span>
<a id="__codelineno-6-2" name="__codelineno-6-2"></a><span class="na">mp.messaging.incoming.people.durable</span><span class="o">=</span><span class="s">true</span><span class="w"></span>
<a id="__codelineno-6-3" name="__codelineno-6-3"></a><span class="na">mp.messaging.incoming.people.address</span><span class="o">=</span><span class="s">people</span><span class="w"></span>
<a id="__codelineno-6-4" name="__codelineno-6-4"></a><span class="na">mp.messaging.incoming.people.container-id</span><span class="o">=</span><span class="s">people</span><span class="w"></span>
</code></pre></div>
</td></tr></table>
<p>You may need to configure the <code>link-name</code> attribute, if the queue name
is not the channel name:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-7-1">1</a></span>
<span class="normal"><a href="#__codelineno-7-2">2</a></span>
<span class="normal"><a href="#__codelineno-7-3">3</a></span>
<span class="normal"><a href="#__codelineno-7-4">4</a></span>
<span class="normal"><a href="#__codelineno-7-5">5</a></span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1"></a><span class="na">mp.messaging.incoming.people-in.connector</span><span class="o">=</span><span class="s">smallrye-amqp</span><span class="w"></span>
<a id="__codelineno-7-2" name="__codelineno-7-2"></a><span class="na">mp.messaging.incoming.people-in.durable</span><span class="o">=</span><span class="s">true</span><span class="w"></span>
<a id="__codelineno-7-3" name="__codelineno-7-3"></a><span class="na">mp.messaging.incoming.people-in.address</span><span class="o">=</span><span class="s">people</span><span class="w"></span>
<a id="__codelineno-7-4" name="__codelineno-7-4"></a><span class="na">mp.messaging.incoming.people-in.container-id</span><span class="o">=</span><span class="s">people</span><span class="w"></span>
<a id="__codelineno-7-5" name="__codelineno-7-5"></a><span class="na">mp.messaging.incoming.people-in.link-name</span><span class="o">=</span><span class="s">people</span><span class="w"></span>
</code></pre></div>
</td></tr></table>
<h2 id="receiving-cloud-events">Receiving Cloud Events</h2>
<p>The AMQP connector supports <a href="https://cloudevents.io/">Cloud Events</a>.
When the connector detects a <em>structured</em> or <em>binary</em> Cloud Events, it
adds a <a class='docissimo, docissimo-javadoc' href='https://javadoc.io/doc/io.smallrye.reactive/smallrye-reactive-messaging-api/3.14.0-SNAPSHOT/io/smallrye/reactive/messaging/ce/IncomingCloudEventMetadata.html'>IncomingCloudEventMetadata</a>
into the metadata of the <code>Message</code>. <code>IncomingCloudEventMetadata</code>
contains accessors to the mandatory and optional Cloud Event attributes.</p>
<p>If the connector cannot extract the Cloud Event metadata, it sends the
Message without the metadata.</p>
<h3 id="binary-cloud-events">Binary Cloud Events</h3>
<p>For <code>binary</code> Cloud Events, <strong>all</strong> mandatory Cloud Event attributes must
be set in the AMQP application properties, prefixed by <code>cloudEvents:</code>
(as mandated by the <a href="https://github.com/cloudevents/spec/blob/v1.0.1/amqp-protocol-binding.md">protocol
binding</a>).
The connector considers headers starting with the <code>cloudEvents:</code> prefix
but not listed in the specification as extensions. You can access them
using the <code>getExtension</code> method from <code>IncomingCloudEventMetadata</code>.</p>
<p>The <code>datacontenttype</code> attribute is mapped to the <code>content-type</code> header
of the record.</p>
<h3 id="structured-cloud-events">Structured Cloud Events</h3>
<p>For <code>structured</code> Cloud Events, the event is encoded in the record’s
value. Only JSON is supported, so your event must be encoded as JSON in
the record’s value.</p>
<p>Structured Cloud Event must set the <code>content-type</code> header of the record
to <code>application/cloudevents+json; charset=UTF-8</code>. The message body must
be a valid JSON object containing at least all the mandatory Cloud
Events attributes.</p>
<p>If the record is a structured Cloud Event, the created Message’s payload
is the Cloud Event <code>data</code>.</p>

              
            </article>
          </div>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="../amqp/" class="md-footer__link md-footer__link--prev" aria-label="Previous: AMQP 1.0 Connector" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              AMQP 1.0 Connector
            </div>
          </div>
        </a>
      
      
        
        <a href="../sending-amqp-messages/" class="md-footer__link md-footer__link--next" aria-label="Next: Sending messages" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Sending messages
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Sponsored by <a href="https://www.redhat.com"><img style="vertical-align: middle; height: 2.5em;" alt="Red Hat" src="https://github.com/jbossorg/website/raw/master/docs/img/redhat_reversed.svg"/></a> <br/> <a href="https://creativecommons.org/licenses/by/3.0/">CC by 3.0</a> | <a href="https://www.redhat.com/en/about/privacy-policy">Privacy Policy</a>
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.sections", "navigation.tracking", "navigation.indexes"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../../assets/javascripts/workers/search.361d90f1.min.js", "version": {"provider": "mike"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.289a2a4b.min.js"></script>
      
    
  </body>
</html>